const e=document.querySelector("#form-main"),t=Array.from(e.elements).filter(e=>"OUTPUT"===e.tagName),n=function(e){let t={};return Array.from(e.elements).filter(e=>"OUTPUT"===e.tagName).forEach(e=>{t[e.name]=e}),t}(e),o=document.querySelector(".btns-global"),l=document.querySelector("#btn-to-top"),i=document.querySelector("#btn-reset-global "),r=document.querySelector("#btn-save-global");function c(e){s(e.doughWeight,n.doughWeight,0),s(e.flourWeight,n.flourWeight,0),s(e.saltWeight,n.saltWeight,0),s(e.liquidIngredsWeight,n.liquidIngredsWeight,0,{prefix:"",postfix:" g"}),s(e.waterWeight,n.waterWeight,0),s(e.vinegarWeight,n.vinegarWeight,0),s(e.oilWeight,n.oilWeight,0)}function s(e,t,n,o){let l;l=e?o?`${o.prefix}${e.toFixed(n)}${o.postfix}`:`${e.toFixed(n)}`:"",t.style.fontWeight="bold",t.textContent=l}class a{constructor({titleText:e,msgText:t,confirmText:n,cancelText:o,msgText2:l}){this.titleText=e,this.msgText=t,this.confirmText=n,this.cancelText=o,this.msgText2=l}createAndOpen(e,t){this.modalElem=document.createElement("div"),this.modalElem.classList.add("modal"),setTimeout(()=>{this.modalElem.classList.add("open")},400);let n=document.createElement("div");n.classList.add("content"),this.modalElem.appendChild(n);let o=document.createElement("p");o.classList.add("title-text"),o.textContent=this.titleText,n.appendChild(o);let l=document.createElement("p");if(l.classList.add("msg-text"),void 0!==this.msgText2?l.innerHTML=this.msgText+"<br/>"+this.msgText2:l.textContent=this.msgText,n.appendChild(l),this.cancelText){let e=document.createElement("button");e.classList.add("btn-cancel"),e.textContent=this.cancelText,e.addEventListener("click",()=>{t("Cancelled"),this.close()}),n.appendChild(e)}if(this.confirmText){let t=document.createElement("button");t.classList.add("btn-confirm"),t.textContent=this.confirmText,t.addEventListener("click",()=>{e("Confirmed"),this.close()}),n.appendChild(t)}document.body.appendChild(this.modalElem);let i=document.querySelector(".btn-cancel");i?i.focus():document.querySelector(".btn-confirm").focus()}open(){return new Promise((e,t)=>{this.createAndOpen(e,t)})}close(){this.modalElem.classList.remove("open"),setTimeout(()=>{document.body.removeChild(this.modalElem)},400)}}function u(e){e&&function(e,t,n){let o=document.createElement("div");o.setAttribute("class","temp-alert"),o.style.backgroundColor=n,o.style.outline=`2px solid ${n}`;let l=document.createElement("span");l.setAttribute("class","check-mark"),l.innerHTML=e,o.appendChild(l),setTimeout(function(){o.parentNode.removeChild(o)},400),document.body.appendChild(o)}("&check;",0,"green")}const d=new a({titleText:"",msgText:"Желаете ли всички запаметени стойности, свързани с настоящата страница, да бъдат изтрити трайно от паметта?",confirmText:"Да",cancelText:"Не"}),m=new a({titleText:"",msgText:"Моля, попълнете всички задължителни полета ...",confirmText:"OK",cancelText:"",msgText2:""}),f=new a({titleText:"",msgText:`\u{41C}\u{43E}\u{43B}\u{44F}, \u{432}\u{44A}\u{432}\u{435}\u{434}\u{435}\u{442}\u{435} \u{441}\u{442}\u{43E}\u{439}\u{43D}\u{43E}\u{441}\u{442} \u{432} \u{434}\u{438}\u{430}\u{43F}\u{430}\u{437}\u{43E}\u{43D}\u{430}: `,confirmText:"OK",cancelText:"",msgText2:""});function h(e,t){let n=t.value;""!==n&&!1===n.includes(".")&&(t.value=n+".0")}function g(e){return Object.fromEntries(new FormData(e))}function p(e,[t,n]){let l=document.querySelectorAll("fieldset"),i=document.querySelectorAll("a"),r=e=>e.preventDefault();if(e)return o.style.pointerEvents="none",l.forEach(e=>e.disabled=!0),i.forEach(e=>e.addEventListener("click",r)),[i,r];o.style.pointerEvents="initial",l.forEach(e=>e.disabled=!1),t.forEach(e=>e.removeEventListener("click",n))}function x(e,t){let n=JSON.stringify(e);localStorage.setItem(t,n)}function E(t){var n;n=T,e.reset(),function(e){for(let t of e.querySelectorAll("input"))t.style.outline="none"}(e),n(),u(t)}function T(){!function(e){e.forEach(e=>{e.style.fontWeight="initial",!1===e.className.includes("-secondary")?e.textContent="####":e.textContent="###"})}(t)}function b(e,t){return e*(Number(t)/100)}function y(e,t,n){x(g(t),t.name),u(n)}function v(e,t,n,o,l,i){!0!==n.isFirstPageLoad&&e.preventDefault();let r=!1!==function(e,t,n){for(let o of e)if("INPUT"===o.tagName&&!1!==o.required&&""===o.value){if(!0!==t.isFirstPageLoad){n();let e=p(!0,[]);m.open().then(e=>{}).catch(e=>console.log(e)).finally(()=>{p(!1,e),o.focus()})}return!1}return!0}(t.elements,n,l)&&!1!==function(e,t,n){for(let o of e){if("number"!==o.type)continue;let e=Number(o.value),l=Number(o.min),i=Number(o.max);if(0===i&&(i=Number.MAX_SAFE_INTEGER),e<l||e>i){if(!0!==t.isFirstPageLoad){n();let e=p(!0,[]);f.msgText2=`[ ${l} - ${i} ]`,f.open().then(e=>{}).catch(e=>console.log(e)).finally(()=>{p(!1,e),o.focus()})}return!1}}return!0}(t.elements,n,l)&&g(t);if(!1!==r&&(x(r,t.name),o(function(e){var t,n,o,l;let i=(t=e.crustsCount,n=e.crustWeight,Number(t)*Number(n)),r=(o=e.hydrationPercent,l=e.saltPercent,i/(1+Number(o/100)+Number(l/100))),c=b(r,e.saltPercent),s=b(r,e.hydrationPercent),a=b(r,e.vinegarPercent),u=b(r,e.oilPercent);return{doughWeight:i,flourWeight:r,saltWeight:c,liquidIngredsWeight:s,vinegarWeight:a,oilWeight:u,waterWeight:s-(a+u)}}(r)),!0!==n.isFirstPageLoad)){u(!0);let e=window.screen.width,t=window.screen.availWidth;i&&(e<=680||t<=680)&&(location.href=i)}}document.addEventListener("DOMContentLoaded",t=>{(function(e){for(let n of e){var t;let e=(t=n.name,JSON.parse(localStorage.getItem(t)));if(null===e)return console.info("No localStorage for this form ..."),null;for(let t in e)n[t].value=e[t]}})([e]),v(t,e,{isFirstPageLoad:!0},c)}),window.addEventListener("scroll",function(){document.body.scrollTop>120||document.documentElement.scrollTop>120?l.style.display="block":l.style.display="none"}),l.addEventListener("click",function(){document.body.scrollTop=0,document.documentElement.scrollTop=0;let e=`${window.location.pathname}`||"",t=window.location.protocol+"//"+window.location.host+e;history.replaceState(null,"",t)}),i.addEventListener("click",function(){E(!1);let t=p(!0,[]);d.open().then(t=>{localStorage.clear(),e.reset(),u(!0),location.reload()}).catch(e=>{}).finally(()=>p(!1,t))}),r.addEventListener("click",function(e){for(let t of document.querySelectorAll("form"))y(e,t,!1);u(!0)}),function(){for(let e of document.querySelectorAll("input"))e.addEventListener("focusout",()=>{!1!==e.required&&(""===e.value?e.style.outline="2px solid green":e.style.outline="none")}),e.addEventListener("focusout",()=>(function(e){if("number"===e.type&&""!==e.value){let t=Number(e.value),n=Number(e.min),o=Number(e.max);return(0===o&&(o=Number.MAX_SAFE_INTEGER),t<n||t>o)?(e.style.outline="2px solid red",!1):(e.style.outline="none",!0)}})(e))}(),document.querySelectorAll('input[step="0.1"]').forEach(e=>{e.addEventListener("focusout",t=>h(t,e)),e.addEventListener("keydown",t=>{"Enter"===t.code&&h(t,e)})}),document.addEventListener("click",t=>{if("BUTTON"!==t.target.tagName)return;let n=t.target.parentElement.className,o=t.target.className;n.includes("-main")&&("btn-submit"===o?v(t,e,{isFirstPageLoad:!1},c,T,"#results-fMain"):"btn-reset"===o?E(!0):"btn-save"===o&&y(t,e,!0))});
//# sourceMappingURL=index.0f936680.js.map
