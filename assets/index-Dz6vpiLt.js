(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const l=document.querySelector("#form-main"),W=P(l),A=q(l),p=document.querySelector(".btns-global"),g=document.querySelector("#btn-to-top"),C=document.querySelector("#btn-reset-global "),w=document.querySelector("#btn-save-global");function P(e){return Array.from(e.elements).filter(t=>t.tagName==="OUTPUT")}function q(e){const t={};return Array.from(e.elements).filter(o=>o.tagName==="OUTPUT").forEach(o=>{t[o.name]=o}),t}function E(e){const t=e,n=A;a(t.doughWeight,n.doughWeight,0),a(t.flourWeight,n.flourWeight,0),a(t.saltWeight,n.saltWeight,0),a(t.liquidIngredsWeight,n.liquidIngredsWeight,0,{prefix:"",postfix:" g"}),a(t.waterWeight,n.waterWeight,0),a(t.vinegarWeight,n.vinegarWeight,0),a(t.oilWeight,n.oilWeight,0)}function a(e,t,n,o){let i;e?o?i=`${o.prefix}${e.toFixed(n)}${o.postfix}`:i=`${e.toFixed(n)}`:i="",t.style.fontWeight="bold",t.textContent=i}class h{constructor({titleText:t,msgText:n,confirmText:o,cancelText:i,msgText2:s}){this.titleText=t,this.msgText=n,this.confirmText=o,this.cancelText=i,this.msgText2=s}createAndOpen(t,n){this.modalElem=document.createElement("div"),this.modalElem.classList.add("modal"),setTimeout(()=>{this.modalElem.classList.add("open")},400);const o=document.createElement("div");o.classList.add("content"),this.modalElem.appendChild(o);const i=document.createElement("p");i.classList.add("title-text"),i.textContent=this.titleText,o.appendChild(i);const s=document.createElement("p");if(s.classList.add("msg-text"),this.msgText2!==void 0?s.innerHTML=this.msgText+"<br/>"+this.msgText2:s.textContent=this.msgText,o.appendChild(s),this.cancelText){const c=document.createElement("button");c.classList.add("btn-cancel"),c.textContent=this.cancelText,c.addEventListener("click",()=>{n("Cancelled"),this.close()}),o.appendChild(c)}if(this.confirmText){const c=document.createElement("button");c.classList.add("btn-confirm"),c.textContent=this.confirmText,c.addEventListener("click",()=>{t("Confirmed"),this.close()}),o.appendChild(c)}document.body.appendChild(this.modalElem);const r=document.querySelector(".btn-cancel");r?r.focus():document.querySelector(".btn-confirm").focus()}open(){return new Promise((t,n)=>{this.createAndOpen(t,n)})}close(){this.modalElem.classList.remove("open"),setTimeout(()=>{document.body.removeChild(this.modalElem)},400)}}function f(e){e&&F("&check;",400,"green")}function F(e,t,n){const o=document.createElement("div");o.setAttribute("class","temp-alert"),o.style.backgroundColor=n,o.style.outline=`2px solid ${n}`;const i=document.createElement("span");i.setAttribute("class","check-mark"),i.innerHTML=e,o.appendChild(i),setTimeout(function(){o.parentNode.removeChild(o)},t),document.body.appendChild(o)}const M=new h({titleText:"",msgText:"Желаете ли всички запаметени стойности, свързани с настоящата страница, да бъдат изтрити трайно от паметта?",confirmText:"Да",cancelText:"Не"}),k=new h({titleText:"",msgText:"Моля, попълнете всички задължителни полета ...",confirmText:"OK",cancelText:"",msgText2:""}),b=new h({titleText:"",msgText:"Моля, въведете стойност в диапазона: ",confirmText:"OK",cancelText:"",msgText2:""});function D(e,t,n){for(const o of e){if(o.type!=="number")continue;const i=Number(o.value),s=Number(o.min);let r=Number(o.max);if(r===0&&(r=Number.MAX_SAFE_INTEGER),i<s||i>r){if(t.isFirstPageLoad!==!0){n();const c=u(!0,[]);b.msgText2=`[ ${s} - ${r} ]`,b.open().then(m=>{}).catch(m=>console.log(m)).finally(()=>{u(!1,c),o.focus()})}return!1}}return!0}function R(e,t,n){for(const o of e)if(!(o.tagName!=="INPUT"||o.required===!1)&&o.value===""){if(t.isFirstPageLoad!==!0){n();const i=u(!0,[]);k.open().then(s=>{}).catch(s=>console.log(s)).finally(()=>{u(!1,i),o.focus()})}return!1}return!0}function _(){document.querySelectorAll('input[step="0.1"]').forEach(e=>{e.addEventListener("focusout",t=>y(t,e)),e.addEventListener("keydown",t=>{t.code==="Enter"&&y(t,e)})})}function y(e,t){const n=t.value;n!==""&&n.includes(".")===!1&&(t.value=n+".0")}function T(e){return Object.fromEntries(new FormData(e))}function I(e,t,n){return R(e.elements,t,n)===!1||D(e.elements,t,n)===!1?!1:T(e)}function u(e,[t,n]){const o=document.querySelectorAll("fieldset"),i=document.querySelectorAll("a"),s=r=>r.preventDefault();if(e)return p.style.pointerEvents="none",o.forEach(r=>r.disabled=!0),i.forEach(r=>r.addEventListener("click",s)),[i,s];p.style.pointerEvents="initial",o.forEach(r=>r.disabled=!1),t.forEach(r=>r.removeEventListener("click",n))}function x(e,t){const n=JSON.stringify(e);localStorage.setItem(t,n)}function G(e){return JSON.parse(localStorage.getItem(e))}function j(){localStorage.clear()}function $(e){for(const t of e){const n=G(t.name);if(n===null)return console.info("No localStorage for this form ..."),null;for(const o in n){const i=t[o];i.value=n[o]}}}function v(e){K(null,l,L,e)}function L(){V(W)}function U(){B();const e=u(!0,[]);M.open().then(t=>{j(),l.reset(),f(!0),location.reload()}).catch(t=>{}).finally(()=>u(!1,e))}function B(){v(!1)}function V(e){e.forEach(t=>{t.style.fontWeight="initial",t.className.includes("-secondary")===!1?t.textContent="####":t.textContent="###"})}function K(e,t,n,o){t.reset(),H(t),n(),f(o)}function H(e){const t=e.querySelectorAll("input");for(const n of t)n.style.outline="none"}function J(e){const t=X(e.crustsCount,e.crustWeight),n=z(t,e.hydrationPercent,e.saltPercent),o=d(n,e.saltPercent),i=d(n,e.hydrationPercent),s=d(n,e.vinegarPercent),r=d(n,e.oilPercent),c=Q(i,s,r);return{doughWeight:t,flourWeight:n,saltWeight:o,liquidIngredsWeight:i,vinegarWeight:s,oilWeight:r,waterWeight:c}}function X(e,t){return Number(e)*Number(t)}function z(e,t,n){return e/(1+Number(t/100)+Number(n/100))}function Q(e,t,n){return e-(t+n)}function d(e,t){return e*(Number(t)/100)}function Y(e){N(e,l,{isFirstPageLoad:!0},E)}function Z(e){N(e,l,{isFirstPageLoad:!1},E,L,"#results-fMain")}function ee(e){S(e,l,!0)}function te(e){const t=document.querySelectorAll("form");for(const n of t)S(e,n,!1);f(!0)}function S(e,t,n){const o=T(t),i=t.name;x(o,i),f(n)}function N(e,t,n,o,i,s){n.isFirstPageLoad!==!0&&e.preventDefault();const r=I(t,n,i);if(r===!1)return;x(r,t.name);const c=J(r);if(o(c),n.isFirstPageLoad!==!0){f(!0);const m=window.screen.width,O=window.screen.availWidth;s&&(m<=680||O<=680)&&(location.href=s)}}function ne(){const e=document.querySelectorAll("input");for(const t of e)t.addEventListener("focusout",()=>ie(t)),t.addEventListener("focusout",()=>oe(t))}function oe(e){if(e.type==="number"&&e.value!==""){const t=Number(e.value),n=Number(e.min);let o=Number(e.max);return o===0&&(o=Number.MAX_SAFE_INTEGER),t<n||t>o?(e.style.outline="2px solid red",!1):(e.style.outline="none",!0)}}function ie(e){e.required!==!1&&(e.value===""?e.style.outline="2px solid green":e.style.outline="none")}function se(){document.body.scrollTop>120||document.documentElement.scrollTop>120?g.style.display="block":g.style.display="none"}function re(){document.body.scrollTop=0,document.documentElement.scrollTop=0;const e=`${window.location.pathname}`||"",t=window.location.protocol+"//"+window.location.host+e;history.replaceState(null,"",t)}document.addEventListener("DOMContentLoaded",e=>{$([l]),Y(e)});window.addEventListener("scroll",se);g.addEventListener("click",re);C.addEventListener("click",U);w.addEventListener("click",te);ne();_();document.addEventListener("click",e=>{if(e.target.tagName!=="BUTTON")return;const t=e.target.parentElement.className,n=e.target.className;t.includes("-main")&&(n==="btn-submit"?Z(e):n==="btn-reset"?v(!0):n==="btn-save"&&ee(e))});
